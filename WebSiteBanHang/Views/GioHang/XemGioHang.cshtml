@using WebSiteBanHang.Models;
@model List<itemGioHang>

@{
    ViewBag.Title = "XemGioHang";
    Layout = "~/Views/Layout/ProductLayout.cshtml";
}
<script src="https://code.jquery.com/jquery-2.2.4.js"
        integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI="
        crossorigin="anonymous"></script>
<div class="container">

    @if (Model.Count <= 0 || Model == null)
    {
        <h1 style=" font-family:Poppins, sans-serif;color:red;text-align:center;font-weight:bold">GIỎ HÀNG RỖNG</h1>
    }
    else
    {
        <h1 style="font-family:Poppins, sans-serif;color:red;text-align:center;font-weight:bold;padding-top:30px">GIỎ HÀNG</h1>
        <div class="container" style="padding-bottom:20px">
            <div class="col-md-12" style="padding-top:10px">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <td >Mã sản phẩm</td>
                                <td scope="col">Tên sản phẩm</td>
                                <td scope="col">Hình ảnh</td>
                                <td scope="col">Số lượng</td>
                                <td scope="col">Đơn giá</td>
                                <td scope="col">Thành tiền</td>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var item in Model)
                            {
                                <tr>
                                    <td>@item.MaSP</td>
                                    <td>@item.TenSP</td>
                                    <td><img src="@Url.Content("~/Content/HinhAnhSP/" + item.HinhAnh)" style="width:50px;height:50px" /></td>
                                    <td>@item.SoLuong</td>
                                    <td>@item.DonGia.ToString("#,##") đồng</td>
                                    <td>@item.ThanhTien.ToString("#,##") đồng</td>

                                    <td>
                                        @Html.ActionLink("Sửa", "SuaGioHang", new { @maSP = item.MaSP })
                                        @Html.ActionLink("Xóa", "XoaGioHang", new { @maSP = item.MaSP })
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
            </div>
        </div>

        <div class="container">
            @using (Html.BeginForm("DatHang", "GioHang"))
            {
                if (Session["TaiKhoan"] == null)
                {

                    <div class="container">
                        <h3 style=" font-family:Poppins, sans-serif;color:red;text-align:center;font-weight:bold">Thông tin mua hàng</h3>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="inputEmail4">Họ tên</label>
                                <input type="text" name="TenKH" class="form-control" id="TenKH" placeholder="Tên khách hàng" required>
                                <p id="TB_TenKH"></p>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="inputEmail4">Địa chỉ</label>
                                <input type="text" name="DiaChi" class="form-control" id="DiaChi" placeholder="Địa chỉ" required>
                                <p id="TB_DiaChi"></p>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="inputAddress">Email</label>
                                <input type="text" name="Email" class="form-control" id="Email" placeholder="Email" required>
                                <p id="TB_Email"> </p>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="inputAddress">Số điện thoại</label>
                                <input type="text" name="SoDienThoai" class="form-control" id="SoDienThoai" placeholder="Số điện thoại" required>
                                <p id="SoDienThoai"></p>
                            </div>
                        </div>
                        @*<script>
                            $("#btnDatHang").click(function () {
                                var loi = 0;
                                if ($("#TenKH").val() == "") {
                                    $("#TB_TenKH").text("Tên khách hàng không được bỏ trống")
                                    return false; // ngăn sự kiện submit tới server
                                }
                                else {
                                    loi++;
                                    $("#TB_TenKH").text("");
                                }

                                if ($("#DiaChi").val() == "") {
                                    $("#TB_DiaChi").text("Địa chỉ không được bỏ trống")
                                    return false; // ngăn sự kiện submit tới server
                                }
                                else {
                                    loi++;
                                    $("#TB_DiaChi").text("");
                                }

                                if ($("#SoDienThoai").val() == "") {
                                    $("#TB_SoDienThoai").text("Số điện thoại không được bỏ trống")
                                    return false;
                                }
                                else {
                                    loi++;
                                    $("#TB_DiaChi").text("");
                                }

                                if ($("#Email").val() == "") {
                                    $("#TB_Email").text("Email không được bỏ trống")
                                    return false;
                                }
                                else {
                                    loi++;
                                    $("#TB_Email").text("");
                                }

                                if (loi != 0) {
                                    return false;
                                }
                            });
                        </script>*@
                    </div>
                }
                else
                {
                    <div class="container">
                        <h3 style=" font-family:Poppins, sans-serif;color:red;text-align:center;font-weight:bold">Thông tin mua hàng</h3>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="inputEmail4">Họ tên</label>
                                <input type="text" name="TenKH" class="form-control" id="TenKH" placeholder="Tên khách hàng" required>
                                <p id="TB_TenKH"></p>
                            </div>
                            <div class="form-group col-md-6">
                                <label for="inputEmail4">Địa chỉ</label>
                                <input type="text" name="DiaChi" class="form-control" id="DiaChi" placeholder="Địa chỉ" required>
                                <p id="TB_DiaChi"></p>
                            </div>
                        </div>
                    </div>
                 }
                        <div class="container">                       
                            <div class="col-md-9 divDatHang" style="text-align:left">
                                @*<input class="button" type="submit" value="Đặt hàng" id="btnnDatHang" />*@
                                <div class="col-md-3">
                                    <button type="submit" id="btnDatHang" style="background-color: #4CAF50;">
                                        Đặt hàng
                                    </button>
                                </div>
                                <div class="col-md-3">
                                    <button style="background-color:#f1c40f">
                                        @Html.ActionLink("Mua tiếp", "Index", "Home")
                                    </button>
                                </div>
                            </div>
                        </div>
                        }
                    </div>
                }
            </div>
